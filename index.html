<!-- 

  FUNCTIONALITY:
  — Click any image
  — Modal pops up
  — Carousel opens on image selected (by index clicked)
  — Arrows are available to continue navigating prev/next through slides
  —— Slides are ordered same as the order on main page

-->

<!DOCTYPE html>
<html lang="en-GB">
  <head itemscope itemtype="http://schema.org/WebSite">
    <title>Modal Gallery</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="origin-when-cross-origin">

    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">

    <script src="assets/main.min.js" defer></script>
    <link rel="stylesheet" href="assets/main.min.css">
  </head>

  <body 
    class="relative max-w-[1000px] mx-auto px-[20px] py-[100px]"
    x-data="{
      showModal: false,
    }"  
    x-init="() => {
      const slider = new Splide($refs.carousel, {
        perPage: 1,
        gap: 40
      }).mount()
      window.addEventListener('slidechange', e => {
        slider.go(e.detail)
      })
    }"
  >

    <!-- MAIN CONTENT -->
    <main 
      class=""
    > 
      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-full h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 1 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/1000" 
            alt="" 
            data-slide
            x-data
            @click="showModal = true; $dispatch('slidechange', 0)"
            class="w-full h-full object-cover"
          >
        </div>
      </section>
      
      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-full text-center">
          Some text here to split up the content blocks
        </div>
      </section>

      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-full h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 2 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/1200" 
            alt="" 
            data-slide
            x-data
            @click="showModal = true; $dispatch('slidechange', 1)"
            class="w-full h-full object-cover"
          >
        </div>
      </section>
      
      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-full text-center">
          Some text here to split up the content blocks
        </div>
      </section>

      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-6 h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 3 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/300" 
            alt="" 
            data-slide
            x-data
            @click="showModal = true; $dispatch('slidechange', 2)"
            class="w-full h-full object-cover"
          >
        </div>
        
        <div class="col-span-6 h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 4 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/800" 
            alt="" 
            data-slide
            x-data
            @click="showModal = true"
            class="w-full h-full object-cover"
          >
        </div>
      </section>

      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-6 h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 5 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/600"
            alt="" 
            data-slide
            x-data
            @click="showModal = true"
            class="w-full h-full object-cover"
          >
        </div>
  
        <div class="col-span-6 text-center">
          Some text here to split up the content blocks
        </div>
      </section>
      
      <section class="grid grid-cols-12 items-center gap-[20px] my-[20px]">
        <div class="col-span-full h-[350px] overflow-hidden">
          <!-- Click this to make modal carousel go to index 6 -->
          <img 
            src="https://source.unsplash.com/collection/3493233/1500" 
            alt="" 
            data-slide
            x-data
            @click="showModal = true"
            class="w-full h-full object-cover"
          >
        </div>
      </section>
    </main>


    <!-- MODAL -->
    <section
      class="fixed inset-0 w-full h-full transition duration-200 bg-black/[.75] z-[20] flex overflow-y-scroll"
      :class="{
        'opacity-0 pointer-events-none ' : showModal === false,
        'opacity-100 pointer-events-auto' : showModal === true,
      }"
      x-cloak
    >
      <div class="relative w-[80%] h-[80%] m-auto">
        <button type="button" class="absolute top-[10px] right-[10px] p-[5px] text-white z-[20]"
          @click="showModal = false"
        >
          Close
        </button>
        
        <!-- CAROUSEL -->
        <div 
          class="splide w-full"
          role="region"
          aria-label="carousel"
          tabindex="-1"
          x-ref="carousel"
        >
          <div class="splide__track overflow-visible">
            <div class="splide__list flex">
              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/1000" 
                  alt=""
                  class="w-full h-full object-cover"
                >
              </div>

              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/1200" 
                  alt="" 
                  class="w-full h-full object-cover"
                >
              </div>
              
              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/300" 
                  alt="" 
                  class="w-full h-full object-cover"
                >
              </div>

              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/800" 
                  alt="" 
                  class="w-full h-full object-cover"
                >
              </div>

              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/600"
                  alt="" 
                  class="w-full h-full object-cover"
                >
              </div>

              <div class="splide__slide">
                <img 
                  src="https://source.unsplash.com/collection/3493233/1500" 
                  alt="" 
                  class="w-full h-full object-cover"
                >
              </div>

            </div>
          </div>
        </div>

      </div>
    </section>
  </body>
</html>